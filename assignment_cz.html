<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><!-- base href="https://courses.fit.cvut.cz/BI-PSI/labs/homeworks/task1.html" --><link rel="stylesheet" href="chrome://global/skin/aboutReader.css" type="text/css"><link rel="stylesheet" href="chrome://global/content/simplifyMode.css" type="text/css"><title>Domácí úloha č. 1 • BI-PSI • FIT ČVUT Course Pages</title></head><body><div id="container"><div id="reader-header" class="header" style="display: block;"><h1 id="reader-title">Domácí úloha č. 1 • BI-PSI • FIT ČVUT Course Pages</h1><div id="reader-credits" class="credits"></div></div><div class="content"><div id="moz-reader-content" style="display: block;"><div id="readability-page-1" class="page"><div>
          <a href="#nav">Jdi na navigaci předmětu</a>
          
          <nav id="toc" role="doc-toc"><h2 id="toc-title">Obsah</h2><ol><li><a href="#_anotace">Anotace</a></li><li><a href="#_zadání">Zadání</a></li><li><a href="#_detailní-specifikace">Detailní specifikace</a><ol><li><a href="#_autentizace">Autentizace</a></li><li><a href="#_pohyb-robota-k-cílové-oblasti">Pohyb robota k cílové oblasti</a></li><li><a href="#_vyzvednutí-tajného-vzkazu">Vyzvednutí tajného vzkazu</a></li><li><a href="#_dobíjení">Dobíjení</a></li></ol></li><li><a href="#_chybové-situace">Chybové situace</a><ol><li><a href="#_chyba-při-autentizaci">Chyba při autentizaci</a></li><li><a href="#_syntaktická-chyba">Syntaktická chyba</a></li><li><a href="#_logická-chyba">Logická chyba</a></li><li><a href="#_timeout">Timeout</a></li></ol></li><li><a href="#_speciální-situace">Speciální situace</a></li><li><a href="#_optimalizace-serveru">Optimalizace serveru</a></li><li><a href="#_ukázka-komunikace">Ukázka komunikace</a></li><li><a href="#_testování">Testování</a><ol><li><a href="#_tester">Tester</a></li><li><a href="#_přehled-testů">Přehled testů</a></li><li><a href="#_ke-stažení">Ke stažení</a></li></ol></li><li><a href="#_požadavky-na-řešení">Požadavky na řešení</a></li><li><a href="#_odevzdání">Odevzdání</a><ol><li><a href="#_náhrání-na-archivační-server">Náhrání na archivační server</a></li><li><a href="#_osobní-prezentace">Osobní prezentace</a></li></ol></li></ol></nav><section><h2 id="_anotace"><a href="#_anotace" aria-hidden="true"></a>Anotace</h2><p>Cílem úlohy je vytvořit vícevláknový server pro TCP/IP komunikaci a implementovat komunikační protokol podle dané specifikace.</p>
<section role="doc-notice"><h6><span>Důležité: </span></h6><p>Před začátkem implementace si prostudujte <a href="#odevzdani">poznámky k odevzdání</a>! Ušetříte si budoucí komplikace.</p></section></section>
<section><h2 id="_zadání"><a href="#_zadání" aria-hidden="true"></a>Zadání</h2><p>Vytvořte
 server pro automatické řízení vzdálených robotů. Roboti se sami 
přihlašují k serveru a ten je navádí k cílové lokaci v souřadnicové 
síti. Pro účely testování každý robot startuje na náhodných souřadnicích
 a jeho cílová oblast se nachází vždy od -2 do 2 na ose X i na ose Y. 
Někde v cílové oblasti se nachází tajná zpráva, kterou robot musí najít,
 takže je nutné prohledat všechna políčka cílové oblasti. Server zvládne
 navigovat více robotů najednou a implementuje bezchybně komunikační 
protokol.</p></section>
<section><h2 id="_detailní-specifikace"><a href="#_detailní-specifikace" aria-hidden="true"></a>Detailní specifikace</h2><p>Komunikace
 mezi serverem a roboty je realizována plně textovým protokolem. Každý 
příkaz je zakončen dvojicí speciálních symbolů „\a\b“. Server musí 
dodržet komunikační protokol do detailu přesně, ale musí počítat s 
nedokonalými firmwary robotů (viz sekce Speciální situace).</p>
<p>Zprávy serveru:</p>
<div><table><colgroup><col><col><col></colgroup><tbody><tr><th>Název</th><th>Zpráva</th><th>Popis</th></tr><tr><td>SERVER_CONFIRMATION</td><td>&lt;16-bitové číslo v decimální notaci&gt;\a\b</td><td>Zpráva s potvrzovacím kódem. Může obsahovat maximálně 5 čísel a ukončovací sekvenci \a\b.</td></tr><tr><td>SERVER_MOVE</td><td>102 MOVE\a\b</td><td>Příkaz pro pohyb o jedno pole vpřed</td></tr><tr><td>SERVER_TURN_LEFT</td><td>103 TURN LEFT\a\b</td><td>Příkaz pro otočení doleva</td></tr><tr><td>SERVER_TURN_RIGHT</td><td>104 TURN RIGHT\a\b</td><td>Příkaz pro otočení doprava</td></tr><tr><td>SERVER_PICK_UP</td><td>105 GET MESSAGE\a\b</td><td>Příkaz pro vyzvednutí zprávy</td></tr><tr><td>SERVER_LOGOUT</td><td>106 LOGOUT\a\b</td><td>Příkaz pro ukončení spojení po úspěšném vyzvednutí zprávy</td></tr><tr><td>SERVER_OK</td><td>200 OK\a\b</td><td>Kladné potvrzení</td></tr><tr><td>SERVER_LOGIN_FAILED</td><td>300 LOGIN FAILED\a\b</td><td>Nezdařená autentizace</td></tr><tr><td>SERVER_SYNTAX_ERROR</td><td>301 SYNTAX ERROR\a\b</td><td>Chybná syntaxe zprávy</td></tr><tr><td>SERVER_LOGIC_ERROR</td><td>302 LOGIC ERROR\a\b</td><td>Zpráva odeslaná ve špatné situaci</td></tr></tbody></table></div>
<p>Zprávy klienta:</p>
<div><table><colgroup><col><col><col><col><col></colgroup><tbody><tr><th>Název</th><th>Zpráva</th><th>Popis</th><th>Ukázka</th><th>Maximální délka</th></tr><tr><td>CLIENT_USERNAME</td><td>&lt;user name&gt;\a\b</td><td>Zpráva s uživatelským jménem. Jméno může být libovolná sekvence znaků kromě kromě dvojice \a\b.</td><td>Umpa_Lumpa\a\b</td><td>12</td></tr><tr><td>CLIENT_CONFIRMATION</td><td>&lt;16-bitové číslo v decimální notaci&gt;\a\b</td><td>Zpráva s potvrzovacím kódem. Může obsahovat maximálně 5 čísel a ukončovací sekvenci \a\b.</td><td>1009\a\b</td><td>7</td></tr><tr><td>CLIENT_OK</td><td>OK &lt;x&gt; &lt;y&gt;\a\b</td><td>Potvrzení o provedení pohybu, kde <em>x</em> a <em>y</em> jsou souřadnice robota po provedení pohybového příkazu.</td><td>OK -3 -1\a\b</td><td>12</td></tr><tr><td>CLIENT_RECHARGING</td><td>RECHARGING\a\b</td><td>Robot se začal dobíjet a přestal reagovat na zprávy.</td><td></td><td>12</td></tr><tr><td>CLIENT_FULL_POWER</td><td>FULL POWER\a\b</td><td>Robot doplnil energii a opět příjímá příkazy.</td><td></td><td>12</td></tr><tr><td>CLIENT_MESSAGE</td><td>&lt;text&gt;\a\b</td><td>Text vyzvednutého tajného vzkazu. Může obsahovat jakékoliv znaky kromě ukončovací sekvence \a\b.</td><td>Haf!\a\b</td><td>100</td></tr></tbody></table></div>
<p>Časové konstanty:</p>
<div><table><colgroup><col><col><col></colgroup><tbody><tr><th>Název</th><th>Hodnota [s]</th><th>Popis</th></tr><tr><td>TIMEOUT</td><td>1</td><td>Server i klient očekávají od protistrany odpověď po dobu tohoto intervalu.</td></tr><tr><td>TIMEOUT_RECHARGING</td><td>5</td><td>Časový interval, během kterého musí robot dokončit dobíjení.</td></tr></tbody></table></div>
<p>Komunikaci s roboty lze rozdělit do několika fází:</p>
<section><h3 id="_autentizace"><a href="#_autentizace" aria-hidden="true"></a>Autentizace</h3><p>Server i klient oba znají dvojici autentizačních klíčů (nejedná se o veřejný a soukromý klíč):</p>
<div><ul><li>Klíč serveru: 54621</li><li>Klíč klienta: 45328</li></ul></div>
<p>Každý robot začne komunikaci odesláním svého uživatelského jména. 
Uživatelské jméno múže být libovolná sekvence znaků neobsahující 
sekvenci „\a\b“. Server z uživatelského jména spočítá hash kód:</p>
<div><pre>Uživatelské jméno: Mnau!

ASCII reprezentace: 77 110 97 117 33

Výsledný hash: ((77 + 110 + 97 + 117 + 33) * 1000) % 65536 = 40784</pre></div>
<p>Výsledný hash je 16-bitové číslo v decimální podobě. Server poté k 
hashi přičte klíč serveru tak, že pokud dojde k překročení kapacity 
16-bitů, hodnota jednoduše přeteče:</p>
<div><pre>(40784 + 54621) % 65536 = 29869</pre></div>
<p>Výsledný potvrzovací kód serveru se jako text pošle klintovi ve 
zprávě SERVER_CONFIRM. Klient z obdrženého kódu vypočítá zpátky hash a 
porovná ho s očekávaným hashem, který si sám spočítal z uživatelského 
jména. Pokud se shodují, vytvoří potvrzovací kód klienta a odešle jej 
zpátky serveru. Výpočet potvrzovacího kódu klienta je obdobný jako u 
serveru, jen se použije klíč klienta:</p>
<div><pre>(40784 + 45328) % 65536 = 20576</pre></div>
<p>Potvrzovací kód klienta se odešle serveru ve zpráve 
CLIENT_CONFIRMATION, který z něj vypočítá zpátky hash a porovná jej s 
původním hashem uživatelského jména. Pokud se obě hodnoty shodují, 
odešle zprávu SERVER_OK, v opačném prípadě reaguje zprávou 
SERVER_LOGIN_FAILED a ukončí spojení. Celá sekvence je na následujícím 
obrázku:</p>
<div><pre>Klient                  Server
​------------------------------------------
CLIENT_USERNAME     ---&gt;
                    &lt;---    SERVER_CONFIRMATION
CLIENT_CONFIRMATION ---&gt;
                    &lt;---    SERVER_OK
                              nebo
                            SERVER_LOGIN_FAILED
                      .
                      .
                      .</pre></div>
<p>Server dopředu nezná uživatelská jména. Roboti proto mohou zvolit 
jakékoliv jméno, ale musí znát klíč klienta i serveru. Dvojice klíčů 
zajistí oboustranou autentizaci a zároveň zabrání, aby byl autentizační 
proces kompromitován prostým odposlechem komunikace.</p></section>
<section><h3 id="_pohyb-robota-k-cílové-oblasti"><a href="#_pohyb-robota-k-cílové-oblasti" aria-hidden="true"></a>Pohyb robota k cílové oblasti</h3><p>Robot
 se může pohybovat pouze rovně (SERVER_MOVE) a je schopen provést 
otočení na místě doprava (SERVER_TURN_RIGHT) i doleva 
(SERVER_TURN_LEFT). Po každém příkazu k pohybu odešle potvrzení 
(CLIENT_OK), jehož součástí je i aktuální souřadnice. Pozor - roboti 
jsou v provozu již dlouhou dobu, takže začínají chybovat. Občas se 
stane, že se nepohnou kupředu. Tuto situaci je třeba detekovat a správně
 na ni zareagovat! Pozice robota není serveru na začátku komunikace 
známa. Server musí zjistit polohu robota (pozici a směr) pouze z jeho 
odpovědí. Z důvodů prevence proti nekonečnému bloudění robota v 
prostoru, má každý robot omezený počet pohybů (posunutí vpřed i 
otočení). Počet pohybů by měl být dostatečný pro rozumný přesun robota k
 cíli. Následuje ukázka komunkace. Server nejdříve pohne dvakrát robotem
 kupředu, aby detekoval jeho aktuální stav a po té jej navádí směrem k 
cílovým souřadnicím.</p>
<div><pre>Klient                  Server
​------------------------------------------
                  .
                  .
                  .
                &lt;---    SERVER_MOVE
CLIENT_OK       ---&gt;
                &lt;---    SERVER_MOVE
CLIENT_OK       ---&gt;
                &lt;---    SERVER_MOVE
                          nebo
                        SERVER_TURN_LEFT
                          nebo
                        SERVER_TURN_RIGHT
                  .
                  .
                  .</pre></div>
<p>Tuto část komunikace nelze přeskočit, robot očekává alespoň jeden 
pohybový příkaz - SERVER_MOVE, SERVER_TURN_LEFT nebo SERVER_TURN_RIGHT!</p>
<p>Pozor! Roboti občas chybují a nedaří se jim vykonat pohyb vpřed. V 
případě, že se nepohnou z místa, je nutné to detekovat a poslat příkaz k
 pohybu ještě jednou. Při rotaci roboti nechybují.</p></section>
<section><h3 id="_vyzvednutí-tajného-vzkazu"><a href="#_vyzvednutí-tajného-vzkazu" aria-hidden="true"></a>Vyzvednutí tajného vzkazu</h3><p>Poté,
 co robot dosáhne cílové oblasti (jedná se o čtverec s rohovými 
souřadnicemi [2,2], [2,-2], [-2,2] a [-2,-2] včetně), tak začne 
prohledávat celou oblast, tedy pokusí vyzvednout vzkaz ze včech 25 
políček cílové oblasti (SERVER_PICK_UP). Pokud je robot požádán o 
vyzvednutí vzkazu a nenachází se v cílové oblasti, spustí se 
autodestrukce robota a komunikace se serverem je přerušena. Pokud je 
políčko prázdné a neobsahuje vzkaz, robot odpoví prázdnou zprávou 
CLIENT_MESSAGE - „\a\b“. (Je garantováno, že hledaná zpráva obsahuje 
vždy neprázdný textový řetězec.) V opačném případě pošle serveru text 
vyzvednutého tajného vzkazu a server ukončí spojení zprávou 
SERVER_LOGOUT. (Je zaručeno, že tajný vzkaz se nikdy neshoduje se 
zprávou CLIENT_RECHARGING, pokud je tato zpráva serverem obdržena po 
žádosti o vyzvednutí jedná se vždy o dobíjení.) Poté klient i server 
ukončí spojení. Ukázka prohledávání cílové oblasti:</p>
<div><pre>Klient                  Server
​------------------------------------------
                  .
                  .
                  .
                &lt;---    SERVER_PICK_UP
CLIENT_MESSAGE  ---&gt;
                &lt;---    SERVER_MOVE
CLIENT_OK       ---&gt;
                &lt;---    SERVER_PICK_UP
CLIENT_MESSAGE  ---&gt;
                &lt;---    SERVER_TURN_RIGHT
CLIENT_OK       ---&gt;
                &lt;---    SERVER_MOVE
CLIENT_OK       ---&gt;
                &lt;---    SERVER_PICK_UP
CLIENT_MESSAGE  ---&gt;
                &lt;---    SERVER_LOGOUT</pre></div></section>
<section><h3 id="_dobíjení"><a href="#_dobíjení" aria-hidden="true"></a>Dobíjení</h3><p>Každý
 z robotů má omezený zdroj energie. Pokud mu začne docházet baterie, 
oznámí to serveru a poté se začne sám ze solárního panelu dobíjet. Během
 dobíjení nereaguje na žádné zprávy. Až skončí, informuje server a 
pokračuje v činnosti tam, kde přestal před dobíjením. Pokud robot 
neukončí dobíjení do časového intervalu TIMEOUT_RECHARGING, server 
ukončí spojení.</p>
<div><pre>Klient                    Server
​------------------------------------------
CLIENT_USERNAME   ---&gt;
                  &lt;---    SERVER_CONFIRMATION
CLIENT_RECHARGING ---&gt;

      ...

CLIENT_FULL_POWER ---&gt;
CLIENT_CONFIRMATION   ---&gt;
                  &lt;---    SERVER_OK
                            nebo
                          SERVER_LOGIN_FAILED
                    .
                    .
                    .</pre></div>
<p>Další ukázka:</p>
<div><pre>Klient                  Server
​------------------------------------------
                    .
                    .
                    .
                  &lt;---    SERVER_MOVE
CLIENT_CONFIRM    ---&gt;
CLIENT_RECHARGING ---&gt;

      ...

CLIENT_FULL_POWER ---&gt;
                &lt;---    SERVER_MOVE
CLIENT_CONFIRM  ---&gt;
                  .
                  .
                  .</pre></div></section></section>
<section><h2 id="_chybové-situace"><a href="#_chybové-situace" aria-hidden="true"></a>Chybové situace</h2><p>Někteří
 roboti mohou mít poškozený firmware a tak mohou komunikovat špatně. 
Server by měl toto nevhodné chování detekovat a správně zareagovat.</p>
<section><h3 id="_chyba-při-autentizaci"><a href="#_chyba-při-autentizaci" aria-hidden="true"></a>Chyba při autentizaci</h3><p>Server
 reaguje na chybnou autentizaci zprávou SERVER_LOGIN_FAILED. Tato zpráva
 je poslána pouze po té, co server přijme validní zprávu CLIENT_USERNAME
 i CLIENT_CONFIRMATION a přijatý hash neodpovídá hashi uživatelského 
jména. (Validní == syntakticky korektní) V jiné situaci server zprávu 
SERVER_LOGIN_FAILED poslat nesmí.</p></section>
<section><h3 id="_syntaktická-chyba"><a href="#_syntaktická-chyba" aria-hidden="true"></a>Syntaktická chyba</h3><p>Na
 syntaktickou chybu reagauje server vždy okamžitě po obdržení zprávy, ve
 které chybu detekoval. Server pošle robotovi zprávu SERVER_SYNTAX_ERROR
 a pak musí co nejdříve ukončit spojení. Syntakticky nekorektní zprávy:</p>
<div><ul><li>Příchozí zpráva je delší než počet znaků definovaný pro 
každou zprávu (včetně ukončovacích znaků \a\b). Délky zpráv jsou 
definovány v tabulce s přehledem zpráv od klienta.</li><li>Příchozí 
zpráva syntakticky neodpovídá ani jedné ze zpráv CLIENT_USERNAME, 
CLIENT_CONFIRMATION, CLIENT_OK, CLIENT_RECHARGING a CLIENT_FULL_POWER.</li></ul></div>
<p>Každá příchozí zpráva je testována na maximální velikost a pouze 
zprávy CLIENT_CONFIRMATION, CLIENT_OK, CLIENT_RECHARGING a 
CLIENT_FULL_POWER jsou testovany na jejich obsah (zprávy CLIENT_USERNAME
 a CLIENT_MESSAGE mohou obsahovat cokoliv).</p></section>
<section><h3 id="_logická-chyba"><a href="#_logická-chyba" aria-hidden="true"></a>Logická chyba</h3><p>Logická
 chyba nastane pouze v jednom případě - když robot pošle info o dobíjení
 (CLIENT_RECHARGING) a po té pošle jakoukoliv jinou zprávu než 
CLIENT_FULL_POWER. Server na tuto chybu reaguje odesláním zprávy 
SERVER_LOGIC_ERROR a okamžitým ukončením spojení.</p></section>
<section><h3 id="_timeout"><a href="#_timeout" aria-hidden="true"></a>Timeout</h3><p>Protokol pro komunikaci s roboty obsahuje dva typy timeoutu:</p>
<div><ul><li>TIMEOUT - timeout pro komunikaci. Pokud robot nebo server 
neobdrží od své protistrany zprávu po dobu tohoto časového intervalu, 
považují spojení za ztracené a okamžitě ho ukončí.</li><li>TIMEOUT_RECHARGING
 - timeout pro dobíjení robota. Po té, co server přijme zprávu 
CLIENT_RECHARGING, musí robot nejpozději do tohoto časového intervalu 
odeslat zprávu CLIENT_FULL_POWER. Pokud to robot nestihne, server musí 
okamžitě ukončit spojení.</li></ul></div></section></section>
<section><h2 id="_speciální-situace"><a href="#_speciální-situace" aria-hidden="true"></a>Speciální situace</h2><p>Při komunikaci přes komplikovanější síťovou infrastrukturu může docházet ke dvěma situacím:</p>
<div><ul><li>Zpráva může dorazit rozdělena na několik částí, které jsou 
ze socketu čteny postupně. (K tomu dochází kvůli segmentaci a případnému
 zdržení některých segmentů při cestě sítí.)</li><li>Zprávy odeslané 
brzy po sobě mohou dorazit téměř současně. Při jednom čtení ze socketu 
mohou být načteny obě najednou. (Tohle se stane, když server nestihne z 
bufferu načíst první zprávu dříve než dorazí zpráva druhá.)</li></ul></div>
<p>Za použití přímého spojení mezi serverem a roboty v kombinaci s 
výkonným hardwarem nemůže k těmto situacím dojít přirozeně, takže jsou 
testovačem vytvářeny uměle. V některých testech jsou obě situace 
kombinovány.</p>
<p>Každý správně implementovaný server by se měl umět s touto situací 
vyrovnat. Firmwary robotů s tímto faktem počítají a dokonce ho rády 
zneužívají. Pokud se v protokolu vyskytuje situace, kdy mají zprávy od 
robota předem dané pořadí, jsou v tomto pořadí odeslány najednou. To 
umožňuje sondám snížit jejich spotřebu a zjednodušuje to implementaci 
protokolu (z jejich pohledu).</p></section>
<section><h2 id="_optimalizace-serveru"><a href="#_optimalizace-serveru" aria-hidden="true"></a>Optimalizace serveru</h2><p>Server
 optimalizuje protokol tak, že nečeká na dokončení zprávy, která je 
očividně špatná. Například na výzvu k autentizaci pošle robot pouze část
 zprávy s uživatelským jménem. Server obdrží např. 14 znaků 
uživatelského jména, ale stále neobdržel ukončovací sekvenci \a\b. 
Vzhledem k tomu, že maximální délka zprávy je 12 znaků, je jasné, že 
přijímaná zpráva nemůže být validní. Server tedy zareaguje tak, že 
nečeká na zbytek zprávy, ale pošle zprávu SERVER_SYNTAX_ERROR a ukončí 
spojení. V principu by měl postupovat stejně při vyzvedávání tajného 
vzkazu.</p>
<p>V případě části komunikace, ve které se robot naviguje k cílovým 
souřadnicím očekává tři možné zprávy: CLIENT_OK, CLIENT_RECHARGING nebo 
CLIENT_FULL_POWER. Pokud server načte část neúplné zprávy a tato část je
 delší než maximální délka těchto zpráv, pošle SERVER_SYNTAX_ERROR a 
ukončí spojení. Pro pomoc při optimalizaci je u každé zprávy v tabulce 
uvedena její maximální velikost.</p></section>
<section><h2 id="_ukázka-komunikace"><a href="#_ukázka-komunikace" aria-hidden="true"></a>Ukázka komunikace</h2><div><pre>C: "Umpa_Lumpa\a\b"
S: "15045\a\b"
C: "5752\a\b"
S: "200 OK\a\b"
S: "102 MOVE\a\b"
C: "OK 0 1\a\b"
S: "102 MOVE\a\b"
C: "OK 0 2\a\b"
S: "103 TURN LEFT\a\b"
C: "OK 0 2\a\b"
S: "102 MOVE\a\b"
C: "OK -1 2\a\b"
S: "102 MOVE\a\b"
C: "OK -2 2\a\b"
S: "104 TURN RIGHT\a\b"
C: "OK -2 2\a\b"
S: "104 TURN RIGHT\a\b"
C: "OK -2 2\a\b"
S: "105 GET MESSAGE\a\b"
C: "Tajny vzkaz.\a\b"
S: "106 LOGOUT\a\b"</pre></div></section>
<section><h2 id="_testování"><a href="#_testování" aria-hidden="true"></a>Testování</h2><p>K
 testování je připraven obraz operačního systému Tiny Core Linux, který 
obsahuje tester domácí úlohy. Obraz je kompatibilní s aplikací 
VirtualBox.</p>
<section><h3 id="_tester"><a href="#_tester" aria-hidden="true"></a>Tester</h3><p>Stáhněte
 a rozbalte obraz. Výsledný soubor spusťte ve VirtualBoxu. Po spuštění a
 nabootování je okamžitě k dispozici shell. Tester se spouští příkazem <em>tester</em>:</p>
<div><pre>tester &lt;číslo portu&gt; &lt;vzdálená adresa&gt; [čísla testů]</pre></div>
<p>Prvním parametrem je číslo portu, na kterém bude naslouchat váš 
server. Následuje parametr se vzdálenou adresou serveru. Pokud je váš 
server spuštěn na stejném počítači jako VirtualBox, použijte adresu 
defaultní brány. Postup je naznačen na následujícím obrázku:</p>
<p><img src="assignment_cz_files/testing-image-example.png" alt="testing image example"></p>
<p>Výstup je poměrně dlouhý, proto je výhodné přesměrovat jej příkazu <em>less</em>, ve kterém se lze dobře pohybovat.</p>
<p>Pokud není zadáno číslo testu, spustí se postupně všechny testy. 
Testy lze spouštět i jednotlivě. Následující ukázka spustí testy 2, 3 a 
8:</p>
<div><pre>tester 3999 10.0.2.2 2 3 8 | less</pre></div>
<section><h4 id="_možné-problémy-v-operačním-systému-windows"><a href="#_možné-problémy-v-operačním-systému-windows" aria-hidden="true"></a>Možné problémy v operačním systému windows</h4><p>V
 některých instalací OS Windows bývá problém se standardní konfigurací 
virtuálního stroje. Pokud se nedaří spojit tester ve virtuálce s 
testovaným serverem v hostitelském operačním systému, tak použijte 
následující postup:</p>
<div><ul><li>U vypnuté virtuálky s testerem změňte nastavení síťového adaptéru z NAT na Host-only network.</li><li>V hostitelském OS by se mělo objevit síťové rozhraní patřící VirtualBoxu. To lze zjistit z příkazové řádky příkazem <em>ipconfig</em>. IP adresa tohoto rozhraní bude pravděpodobně 192.168.56.1/24.</li><li>Ve virtuálce s testerem je teď nutné ručně nastavit IP adresu síťovému rozhraní eth0:</li></ul></div>
<p>sudo ifconfig eth0 192.168.56.2 netmask 255.255.255.0</p>
<div><ul><li>Nyní je možné spustit tester, ale jako cílovou adresu zadejte IP adresu síťového rozhraní v hostitelském OS:</li></ul></div>
<p>tester 3999 192.168.56.1</p></section></section>
<section><h3 id="_přehled-testů"><a href="#_přehled-testů" aria-hidden="true"></a>Přehled testů</h3><section><h4 id="_ideální-situace"><a href="#_ideální-situace" aria-hidden="true"></a>Ideální situace</h4><p>Test
 1 pošle validní data pro autentizaci a jeho robot se po prvním pohybu 
nachází na cílových souřadnicích a očekává vyzvednutí tajného vzkazu.</p></section>
<section><h4 id="_kontrola-autentizace"><a href="#_kontrola-autentizace" aria-hidden="true"></a>Kontrola autentizace</h4><p>Testy
 2 až 4 ověřují, zda server správně kontroluje chyby při autentizaci. 
(Neplatný potvrzovací kód, speciální znaky v uživatelském jméně…​)</p></section>
<section><h4 id="_kontrola-ošetření-speciálních-situací"><a href="#_kontrola-ošetření-speciálních-situací" aria-hidden="true"></a>Kontrola ošetření speciálních situací</h4><p>Testy 5 až 7 kontrolují správné reakce na speciální situace (segmentace a spojování zpráv).</p></section>
<section><h4 id="_kontrola-detekce-syntaktických-chyb"><a href="#_kontrola-detekce-syntaktických-chyb" aria-hidden="true"></a>Kontrola detekce syntaktických chyb</h4><p>Testy 8 až 14 ověřují detekci syntaktických chyb.</p></section>
<section><h4 id="_kontrola-detekce-komunikačního-timeoutu"><a href="#_kontrola-detekce-komunikačního-timeoutu" aria-hidden="true"></a>Kontrola detekce komunikačního timeoutu</h4><p>Testy 15 a 16 ověřují, zda server správně timeoutuje a ukončuje spojení.</p></section>
<section><h4 id="_kontrola-optimalizace-serveru"><a href="#_kontrola-optimalizace-serveru" aria-hidden="true"></a>Kontrola optimalizace serveru</h4><p>Testy 17 až 21 kontrolují, zda je server správně optimalizován.</p></section>
<section><h4 id="_kontrola-navigace-robota"><a href="#_kontrola-navigace-robota" aria-hidden="true"></a>Kontrola navigace robota</h4><p>Testy 20 až 24 kontrolují, zda server dokáže navést robota do cíle. Pozor! Roboti mohou chybovat a občas neprovedou posun vpřed.</p></section>
<section><h4 id="_kontrola-reakce-na-dobíjení-robota"><a href="#_kontrola-reakce-na-dobíjení-robota" aria-hidden="true"></a>Kontrola reakce na dobíjení robota</h4><p>Testy 25 až 28 kontrolují, zda server správně reaguje na dobíjení robota.</p></section>
<section><h4 id="_kontrola-paralelního-zpracování"><a href="#_kontrola-paralelního-zpracování" aria-hidden="true"></a>Kontrola paralelního zpracování</h4><p>Test 29 spustí tři testovací instance paralelně.</p></section>
<section><h4 id="_testování-náhodně-generovanými-situacemi"><a href="#_testování-náhodně-generovanými-situacemi" aria-hidden="true"></a>Testování náhodně generovanými situacemi</h4><p>Test 30 vytváří validní, ale náhodně generovanou komunikaci. Tento test je použit při finálním testu.</p></section>
<section><h4 id="_konečná-kontrola"><a href="#_konečná-kontrola" aria-hidden="true"></a>Konečná kontrola</h4><p>Tento test se spustí automaticky po úspěšném dokončení všech předchozích testů. Spustí se paralelně 3 instance testu 30.</p></section></section>
<section><h3 id="_ke-stažení"><a href="#_ke-stažení" aria-hidden="true"></a>Ke stažení</h3><p>Aplikace VirtualBox: <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></p>
<p>Obraz s testerm: <a href="https://courses.fit.cvut.cz/BI-PSI/media/labs/homeworks/task1/bi-psi_2018_task1_v3.ova.zip">bi-psi_2018_task1_v3.ova.zip</a></p>
<p>Binárka testeru pro linux: <a href="https://courses.fit.cvut.cz/BI-PSI/media/labs/homeworks/task1/psi-tester-2018-t1-v3_x86.bz2">psi-tester-2018-t1-v3_x86.bz2</a></p>
<p>Binárka testeru pro linux (64-bitová verze): <a href="https://courses.fit.cvut.cz/BI-PSI/media/labs/homeworks/task1/psi-tester-2018-t1-v3_x64.bz2">psi-tester-2018-t1-v3_x64.bz2</a></p></section></section>
<section><h2 id="_požadavky-na-řešení"><a href="#_požadavky-na-řešení" aria-hidden="true"></a>Požadavky na řešení</h2><div><ul><li>Řešení
 lze vytvořit v jakémkoliv programovacím jazyce, který implementuje 
rozhraní socketů. Pro čtení a pro zápis do socketu musí být použita 
funkce nebo metoda <em>receive<em></em>/send</em>. V jazyce Java je možné použít streamované čtení a zápis přímo na socketu. Pokud si nejste jisti, napište zodpovědné osobě: <a href="mailto:viktor.cerny@fit.cvut.cz">viktor.cerny@fit.cvut.cz</a></li><li>Přijato bude pouze řešení, které projde všemi testy.</li></ul></div></section>
<section><h2 id="_odevzdání"><a href="#_odevzdání" aria-hidden="true"></a>Odevzdání</h2><p>Úloha
 je úspěšně odevzdána pouze v případě, že byl zdrojový kód nahrán na 
odevzdávací server a řešení bylo osobně odprezentováno na laboratorním 
cvičení! Datum odevzdání je určeno uploadem na odevzdávací server, 
prezentovat úlohu je tedy možné i po deadline a bez penalizace.</p>
<p><strong>DEADLINE pro upload bez penalizace je 28.4.2019!</strong></p>
<p>Po tomto datu bude za každý započatý týden započítán -1 bod.</p>
<section><h3 id="_náhrání-na-archivační-server"><a href="#_náhrání-na-archivační-server" aria-hidden="true"></a>Náhrání na archivační server</h3><p>K odevzdávání slouží speciální server (PSI bouda). <strong>Každý
 student se na něm registruje a ve vlastním zájmu bude nahrávat svá 
průběžná řešení, aby byla u každého dohledatelná historie pro případ 
podezření z plagiarismu.</strong> Na konci semestru budou všechny 
odevzdané zdrojové kódy otestovány na duplicitu. V případě shody dvou a 
více kódů mohou průběžná odevzdání pomoci odhalit viníka. Zdrojový kód 
se nahrává v jednom souboru a nekomprimovaný. Odevzdávací server kód 
nekontroluje, pouze jej porovnává s kódy ostatních studentů a vyhledává 
shodu. Je tedy možné spojit více zdrojových kódů do jednoho i když 
takový kód není potom bez úprav zkompilovatelný.</p>


<p>Link na odevzdávací server: <a href="https://bouda.fit.cvut.cz/">PSI bouda</a></p>
<section role="doc-notice"><h6><span>Důležité: </span></h6><p>Pokud jste nenalezli svůj oblíbený jazyk v nabídce, postěžujte si zde: <a href="mailto:cernyvi2@fit.cvut.cz">cernyvi2@fit.cvut.cz</a>.</p></section>
<section role="doc-notice"><h6><span>Důležité: </span></h6><p>Pokud jste nedostali autentizační mail do 24 hodin, postěžujte si zde: <a href="mailto:cernyvi2@fit.cvut.cz">cernyvi2@fit.cvut.cz</a>.</p></section></section>
<section><h3 id="_osobní-prezentace"><a href="#_osobní-prezentace" aria-hidden="true"></a>Osobní prezentace</h3><p>Probíhá
 na laboratorním cvičení. Student během prezentace musí prokázat, že 
kódu rozumí a že kód funguje. Kód, který je prezentován, musí být stejný
 jako ten odevzdaný na odevzdávací server. Kontrola probíhá v 
následujících krocích:</p>
<div><ol><li>Student ukáže zdrojový kód a spustí test tak, aby bylo zřejmé, že je testován prezentovaný kód.</li><li>Student odpoví na kontrolní otázky ke zdrojovému kódu.</li><li>Student nahraje zdrojový kód na odevzdávací server tak, aby bylo zřejmé, že nahrává opravdu prezentovaný kód.</li></ol></div>
<p>Je na každém studentovi, aby zajistil hladký průběh všech těchto 
kroků. Student zavolá cvičícího k prezentaci až po té, co je na ni 
připraven. Předpokládá se, že studenti prezentují svá řešení na svém 
notebooku, pokud ho nemáte k dispozici, poraďte se svým cvičícím, jak 
úlohu odprezentovat.</p></section></section>
        </div></div></div></div></div></body></html>